services:
  editor-auth:
    build: .
    image: minecraft-editor-auth:latest
    environment:
      NODE_ENV: production
      PORT: 3000
      SESSION_SECRET: ${SESSION_SECRET:-change-me}
      APP_ORIGIN: ${APP_ORIGIN:-https://www.example.com}
      OIDC_ISSUER_URL: ${OIDC_ISSUER_URL}
      OIDC_CLIENT_ID: ${OIDC_CLIENT_ID}
      OIDC_CLIENT_SECRET: ${OIDC_CLIENT_SECRET}
      OIDC_REDIRECT_URI: ${OIDC_REDIRECT_URI}
      RP_ID: ${RP_ID:-}
      RP_NAME: ${RP_NAME:-}
      WEBAUTHN_CREDENTIALS: ${WEBAUTHN_CREDENTIALS:-}
      TOTP_SHARED_SECRETS: ${TOTP_SHARED_SECRETS:-}
    ports:
      - "3000:3000"
    volumes:
      - download-data:/app/data
    restart: unless-stopped
volumes:
  download-data:
